<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
  body {
    padding: 0;
    margin: 0;
  }
  canvas {
    padding: 0;
    margin: 0;
  }
  </style>
</head>
<body>


  <canvas id="myCanvas" width="10" height="10" >
    Your browser does not support the HTML canvas tag.
  </canvas>

<script>

// --------------------------- canvas utils ---------------------------
const drawLine = (point1, point2, conf = {}) => {
  ctx.strokeStyle = conf.color ?? 'black'
  ctx.lineWidth = conf.width ?? 1
  ctx.beginPath();
  ctx.moveTo(point1.x, point1.y);
  ctx.lineTo(point2.x, point2.y);
  ctx.stroke();
}

const drawPoint = (point, color = 'black', size = 1) => {
  if (size > 1) {
    ctx.fillStyle = color
    ctx.strokeStyle = color
    ctx.fill();
    ctx.beginPath();
    ctx.rect(point.x, point.y, size, size);
  } else {
    drawLine(point, { x: point.x + size, y: point.y + size }, { color, width: 1 })
  }
}

const drawCircle = (center, radius, color = 'black', size = 1) => {
	ctx.fillStyle = color
	ctx.strokeStyle = color
	ctx.beginPath();
	ctx.arc(center.x, center.y, radius, 0, 2 * Math.PI);
	ctx.stroke();
}

const view = {
	height: 1000,
	width: 1000,
}

const clearCanvas = () => ctx.clearRect(0, 0, view.width, view.height)


var c = document.getElementById("myCanvas");

const setCanvasSize = () => {
  c.width  = view.width
  c.height = view.height
}

var ctx = c.getContext("2d");

let timeMs = 0
const startTimeMs = Date.now()
const fps = 33

const normalizeIntoInterval = (val, max, min) => (val - min) / (max - min)

const renderUI = () => {
	drawPoint({x:0,y:0}, { })
	clearCanvas()
	const circles = [
		{
			center: { 
				x: 200,
				y: 200 
			},
			radius: 175,
			// speed
			rotationPerSecond: 3,

			initAngle: Math.PI / 2,
		}
	]

	const circle = circles[0]

	drawCircle(circle.center, circle.radius)

	// draw rotating point on Line
	const percentageAngle = normalizeIntoInterval(
		timeMs % (circle.rotationPerSecond * 1_000),
		(circle.rotationPerSecond * 1_000),
		0
	)

	const angleRad = (percentageAngle * (2 * Math.PI)) // + circle.initAngle



	drawLine(circle.center, { 
		x: circle.center.x + (Math.sin(angleRad) * circle.radius),
		y: circle.center.y + (Math.cos(angleRad) * circle.radius)
	}, { width: 3 })



	setTimeout(() => {
		timeMs = Date.now() - startTimeMs
		renderUI()
	}, 1000 / fps)
}


const initRenderUI = () => {
  setCanvasSize()
  renderUI()
}


window.onload = initRenderUI;
initRenderUI

</script>